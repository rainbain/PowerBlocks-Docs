\chapter{Building the SDK}
\hypertarget{md_docs_2_b_u_i_l_d_i_n_g}{}\label{md_docs_2_b_u_i_l_d_i_n_g}\index{Building the SDK@{Building the SDK}}
\label{md_docs_2_b_u_i_l_d_i_n_g_autotoc_md0}%
\Hypertarget{md_docs_2_b_u_i_l_d_i_n_g_autotoc_md0}%


Building the SDK is quite a process as it currently stands. It mainly involves bringing together all the tools needed to operate it.\hypertarget{md_docs_2_b_u_i_l_d_i_n_g_autotoc_md1}{}\doxysection{\texorpdfstring{Building Toolchain}{Building Toolchain}}\label{md_docs_2_b_u_i_l_d_i_n_g_autotoc_md1}
First you need to setup the clang toolchain. Creating both the linux and MSYS2 build works on linux. I have trouble getting llvm to build in MSYS2.

Export build environment. 
\begin{DoxyCode}{0}
\DoxyCodeLine{.\ ./export\_build.sh}

\end{DoxyCode}


Navigate to a working directory for cloning LLVM.

Clone LLVM and setup build folder. 
\begin{DoxyCode}{0}
\DoxyCodeLine{git\ clone\ https://github.com/llvm/llvm-\/project.git}
\DoxyCodeLine{cd\ llvm-\/project}
\DoxyCodeLine{mkdir\ build}
\DoxyCodeLine{cd\ build}

\end{DoxyCode}


Configure LLVM. This will use the Min\+GW if windows is your target. Delete the line with {\ttfamily CMAKE\+\_\+\+TOOLCHAIN\+\_\+\+FILE} if you want to use it on linux. 
\begin{DoxyCode}{0}
\DoxyCodeLine{cmake\ -\/G\ Ninja\ ../llvm\ \(\backslash\)}
\DoxyCodeLine{\ \ -\/DCMAKE\_BUILD\_TYPE=Release\ \(\backslash\)}
\DoxyCodeLine{\ \ -\/DCMAKE\_TOOLCHAIN\_FILE=\$\{SDK\_HOME\}/toolchain/mingw-\/toolchain.cmake\ \(\backslash\)}
\DoxyCodeLine{\ \ -\/DCMAKE\_INSTALL\_PREFIX=\$\{SDK\_HOME\}/toolchain\ \(\backslash\)}
\DoxyCodeLine{\ \ -\/DLLVM\_TARGETS\_TO\_BUILD="{}PowerPC"{}\ \(\backslash\)}
\DoxyCodeLine{\ \ -\/DLLVM\_ENABLE\_PROJECTS="{}clang;lld"{}\ \(\backslash\)}
\DoxyCodeLine{\ \ -\/DLLVM\_ENABLE\_LLD=ON\ \(\backslash\)}
\DoxyCodeLine{\ \ -\/DLLVM\_ENABLE\_ASSERTIONS=OFF\ \(\backslash\)}
\DoxyCodeLine{\ \ -\/DLLVM\_INCLUDE\_EXAMPLES=OFF\ \(\backslash\)}
\DoxyCodeLine{\ \ -\/DLLVM\_INCLUDE\_TESTS=OFF\ \(\backslash\)}
\DoxyCodeLine{\ \ -\/DLLVM\_INCLUDE\_DOCS=OFF\ \(\backslash\)}
\DoxyCodeLine{\ \ -\/DCLANG\_INCLUDE\_TESTS=OFF\ \(\backslash\)}
\DoxyCodeLine{\ \ -\/DCLANG\_INCLUDE\_DOCS=OFF\ \(\backslash\)}
\DoxyCodeLine{\ \ -\/DLLVM\_ENABLE\_BACKTRACES=OFF}

\end{DoxyCode}


Build and install it. 
\begin{DoxyCode}{0}
\DoxyCodeLine{ninja}
\DoxyCodeLine{ninja\ install-\/clang\ install-\/lld\ install-\/llvm-\/ar\ install-\/llvm-\/ranlib\ install-\/llvm-\/objcopy\ install-\/llvm-\/strip\ install-\/llvm-\/objdump\ install-\/clang-\/resource-\/headers}

\end{DoxyCode}


If you wish to export to windows, you will need to fix the symbolic links. 
\begin{DoxyCode}{0}
\DoxyCodeLine{cd\ \$\{SDK\_HOME\}/toolchain/}
\DoxyCodeLine{python3\ fix\_symlink.py}

\end{DoxyCode}


If exporting to windows, its often DLL files will be missing. 
\begin{DoxyCode}{0}
\DoxyCodeLine{cp\ /usr/lib/gcc/x86\_64-\/w64-\/mingw32/14-\/win32/libgcc\_s\_seh-\/1.dll\ \$\{SDK\_HOME\}/toolchain/bin/}
\DoxyCodeLine{cp\ /usr/lib/gcc/x86\_64-\/w64-\/mingw32/14-\/win32/libstdc++-\/6.dll\ \$\{SDK\_HOME\}/toolchain/bin/}

\end{DoxyCode}
\hypertarget{md_docs_2_b_u_i_l_d_i_n_g_autotoc_md2}{}\doxysection{\texorpdfstring{Building Picolibc}{Building Picolibc}}\label{md_docs_2_b_u_i_l_d_i_n_g_autotoc_md2}
At this point transition to the system you intend to use the SDK on.

Export SDK. 
\begin{DoxyCode}{0}
\DoxyCodeLine{.\ ./export.sh}

\end{DoxyCode}


Navigate to a working folder, clone picolibc and setup build folder. 
\begin{DoxyCode}{0}
\DoxyCodeLine{git\ clone\ https://github.com/picolibc/picolibc.git}
\DoxyCodeLine{cd\ picolibc}
\DoxyCodeLine{mkdir\ build}
\DoxyCodeLine{cd\ build}

\end{DoxyCode}


Copy in patched setjmp.\+S file. 
\begin{DoxyCode}{0}
\DoxyCodeLine{cp\ \$\{SDK\_HOME\}/picolibc/setjmp.S\ ../newlib/libc/machine/powerpc/setjmp.S}

\end{DoxyCode}


Setup environment variables. 
\begin{DoxyCode}{0}
\DoxyCodeLine{export\ CMAKE\_GENERATOR="{}Unix\ Makefiles"{}}

\end{DoxyCode}


Configure it 
\begin{DoxyCode}{0}
\DoxyCodeLine{cmake\ ..\ -\/DCMAKE\_INSTALL\_PREFIX=\$\{SDK\_HOME\}/picolibc\ -\/DEXTRA\_C\_FLAGS="{}-\/I\$\{SDK\_HOME\}/picolibc/"{}}

\end{DoxyCode}


Make and install 
\begin{DoxyCode}{0}
\DoxyCodeLine{make\ -\/j\$(nproc)}
\DoxyCodeLine{make\ install}

\end{DoxyCode}


Also, make sure to include the license file for picolibc. 
\begin{DoxyCode}{0}
\DoxyCodeLine{cp\ ../COPYING.picolibc\ \$\{SDK\_HOME\}/picolibc/COPYING.picolibc}

\end{DoxyCode}
 