\doxysection{powerblocks/filesystem/sd.c File Reference}
\hypertarget{sd_8c}{}\label{sd_8c}\index{powerblocks/filesystem/sd.c@{powerblocks/filesystem/sd.c}}


Implementation of Fat\+FF\textquotesingle{}s disk io.  


{\ttfamily \#include "{}sd.\+h"{}}\newline
{\ttfamily \#include "{}powerblocks/core/ios/sdio.\+h"{}}\newline
{\ttfamily \#include "{}powerblocks/core/utils/log.\+h"{}}\newline
{\ttfamily \#include "{}Free\+RTOS.\+h"{}}\newline
{\ttfamily \#include "{}task.\+h"{}}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{sd_8c_a4ec31482ca8b478cb3af1c4e4887d76f}\label{sd_8c_a4ec31482ca8b478cb3af1c4e4887d76f} 
\#define {\bfseries SD\+\_\+\+ERROR\+\_\+\+LOGGING}
\item 
\#define \mbox{\hyperlink{sd_8c_acfc529033d5418fbc8bd651b3e189570}{SD\+\_\+\+LOG\+\_\+\+ERROR}}(fmt, ...)
\item 
\Hypertarget{sd_8c_a16eb1592d5ea7582213334218b2a984d}\label{sd_8c_a16eb1592d5ea7582213334218b2a984d} 
\#define {\bfseries SD\+\_\+\+LOG\+\_\+\+INFO}(fmt, ...)
\item 
\Hypertarget{sd_8c_a4fd7be7ed587b7749c92839cc0c027c8}\label{sd_8c_a4fd7be7ed587b7749c92839cc0c027c8} 
\#define {\bfseries SD\+\_\+\+LOG\+\_\+\+DEBUG}(fmt, ...)
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{sd_8c_a5f7cd5fab9e6f35e3300950dca325ea1}{sd\+\_\+initialize}} ()
\begin{DoxyCompactList}\small\item\em Initializes the sd card system. \end{DoxyCompactList}\item 
\Hypertarget{sd_8c_a9326ba4099af119ac43d3dcd84134903}\label{sd_8c_a9326ba4099af119ac43d3dcd84134903} 
void {\bfseries sd\+\_\+close} ()
\begin{DoxyCompactList}\small\item\em Closes it out. \end{DoxyCompactList}\item 
\Hypertarget{sd_8c_a7353e68bd326d0f4bf267fac8a4cda63}\label{sd_8c_a7353e68bd326d0f4bf267fac8a4cda63} 
DSTATUS {\bfseries sd\+\_\+disk\+\_\+status} ()
\begin{DoxyCompactList}\small\item\em Fat\+FS disk\+\_\+status implementation. \end{DoxyCompactList}\item 
DSTATUS \mbox{\hyperlink{sd_8c_a93bdd155c27c12f32be2357ec3e018e5}{sd\+\_\+disk\+\_\+initialize}} ()
\begin{DoxyCompactList}\small\item\em Fat\+FS disk\+\_\+initialize implementation. \end{DoxyCompactList}\item 
\Hypertarget{sd_8c_ab544dfc97dd84dedcaa98fa006e82af3}\label{sd_8c_ab544dfc97dd84dedcaa98fa006e82af3} 
DRESULT {\bfseries sd\+\_\+disk\+\_\+read} (BYTE \texorpdfstring{$\ast$}{*}buff, LBA\+\_\+t sector, UINT count)
\begin{DoxyCompactList}\small\item\em Fat\+FS disk\+\_\+read implementation. \end{DoxyCompactList}\item 
\Hypertarget{sd_8c_a4ffce2baebb67d498568bffc9e4524d6}\label{sd_8c_a4ffce2baebb67d498568bffc9e4524d6} 
DRESULT {\bfseries sd\+\_\+disk\+\_\+write} (const BYTE \texorpdfstring{$\ast$}{*}buff, LBA\+\_\+t sector, UINT count)
\begin{DoxyCompactList}\small\item\em Fat\+FS disk\+\_\+read implementation. \end{DoxyCompactList}\item 
\Hypertarget{sd_8c_a4cda77d91fd22163d39719dcad8b4d0e}\label{sd_8c_a4cda77d91fd22163d39719dcad8b4d0e} 
DRESULT {\bfseries sd\+\_\+disk\+\_\+ioctl} (BYTE cmd, void \texorpdfstring{$\ast$}{*}buff)
\begin{DoxyCompactList}\small\item\em Fat\+FS disk\+\_\+ioctl implementation. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implementation of Fat\+FF\textquotesingle{}s disk io. 

SD Card System.

Implementation of Fat\+FF\textquotesingle{}s disk io.

\begin{DoxyAuthor}{Author}
Samuel Fitzsimons (rainbain) 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2025 @license MIT (see LICENSE file)
\end{DoxyDate}
Implements the Wii\textquotesingle{}s SD Card Slot

\begin{DoxyAuthor}{Author}
Samuel Fitzsimons (rainbain) 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2025 @license MIT (see LICENSE file) 
\end{DoxyDate}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{sd_8c_acfc529033d5418fbc8bd651b3e189570}\index{sd.c@{sd.c}!SD\_LOG\_ERROR@{SD\_LOG\_ERROR}}
\index{SD\_LOG\_ERROR@{SD\_LOG\_ERROR}!sd.c@{sd.c}}
\doxysubsubsection{\texorpdfstring{SD\_LOG\_ERROR}{SD\_LOG\_ERROR}}
{\footnotesize\ttfamily \label{sd_8c_acfc529033d5418fbc8bd651b3e189570} 
\#define SD\+\_\+\+LOG\+\_\+\+ERROR(\begin{DoxyParamCaption}\item[{}]{fmt}{, }\item[{}]{}...{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{LOG\_ERROR(TAG,\ fmt,\ \#\#\_\_VA\_ARGS\_\_)}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\Hypertarget{sd_8c_a93bdd155c27c12f32be2357ec3e018e5}\index{sd.c@{sd.c}!sd\_disk\_initialize@{sd\_disk\_initialize}}
\index{sd\_disk\_initialize@{sd\_disk\_initialize}!sd.c@{sd.c}}
\doxysubsubsection{\texorpdfstring{sd\_disk\_initialize()}{sd\_disk\_initialize()}}
{\footnotesize\ttfamily \label{sd_8c_a93bdd155c27c12f32be2357ec3e018e5} 
DSTATUS sd\+\_\+disk\+\_\+initialize (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Fat\+FS disk\+\_\+initialize implementation. 

Called on mount after successful status reading. \Hypertarget{sd_8c_a5f7cd5fab9e6f35e3300950dca325ea1}\index{sd.c@{sd.c}!sd\_initialize@{sd\_initialize}}
\index{sd\_initialize@{sd\_initialize}!sd.c@{sd.c}}
\doxysubsubsection{\texorpdfstring{sd\_initialize()}{sd\_initialize()}}
{\footnotesize\ttfamily \label{sd_8c_a5f7cd5fab9e6f35e3300950dca325ea1} 
int sd\+\_\+initialize (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Initializes the sd card system. 

Initializes the SD card system for use in the file system. Must be called before mounting the file system,

but called only ever once, even if the sd card is removed.

\begin{DoxyReturn}{Returns}
Negative if error. 
\end{DoxyReturn}
