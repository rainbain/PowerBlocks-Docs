\doxysection{sdio.\+h}
\hypertarget{sdio_8h_source}{}\label{sdio_8h_source}\index{powerblocks/core/ios/sdio.h@{powerblocks/core/ios/sdio.h}}
\mbox{\hyperlink{sdio_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <stddef.h>}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{comment}{//\ Implementation\ based\ on\ https://wiibrew.org/wiki//dev/sdio.}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00029\ \ \ \ \ SD\_CMD0\_GO\_IDLE\_STATE\ \ \ \ \ \ \ \ \ =\ 0,}
\DoxyCodeLine{00030\ \ \ \ \ SD\_CMD2\_ALL\_SEND\_CID\ \ \ \ \ \ \ \ \ \ =\ 2,}
\DoxyCodeLine{00031\ \ \ \ \ SD\_CMD3\_SEND\_RELATIVE\_ADDR\ \ \ \ =\ 3,}
\DoxyCodeLine{00032\ \ \ \ \ SD\_CMD7\_SELECT\_CARD\ \ \ \ \ \ \ \ \ \ \ =\ 7,}
\DoxyCodeLine{00033\ \ \ \ \ SD\_CMD8\_SEND\_IF\_COND\ \ \ \ \ \ \ \ \ \ =\ 8,}
\DoxyCodeLine{00034\ \ \ \ \ SD\_CMD9\_SEND\_CSD\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ 9,}
\DoxyCodeLine{00035\ \ \ \ \ SD\_CMD12\_STOP\_TRANSMISSION\ \ \ \ =\ 12,}
\DoxyCodeLine{00036\ \ \ \ \ SD\_CMD16\_SET\_BLOCKLEN\ \ \ \ \ \ \ \ \ =\ 16,}
\DoxyCodeLine{00037\ \ \ \ \ SD\_CMD17\_READ\_SINGLE\_BLOCK\ \ \ \ =\ 17,}
\DoxyCodeLine{00038\ \ \ \ \ SD\_CMD18\_READ\_MULTIPLE\_BLOCK\ \ =\ 18,}
\DoxyCodeLine{00039\ \ \ \ \ SD\_CMD24\_WRITE\_BLOCK\ \ \ \ \ \ \ \ \ \ =\ 24,}
\DoxyCodeLine{00040\ \ \ \ \ SD\_CMD25\_WRITE\_MULTIPLE\_BLOCK\ =\ 25,}
\DoxyCodeLine{00041\ \ \ \ \ SD\_CMD55\_APP\_CMD\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ 55,}
\DoxyCodeLine{00042\ \ \ \ \ SD\_CMD56\_GEN\_CMD\ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ 56,}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ SDIO\_CMD5\_IO\_SEND\_OP\_COND\ \ \ \ \ =\ 5,}
\DoxyCodeLine{00045\ \ \ \ \ SDIO\_CMD52\_IO\_RW\_DIRECT\ \ \ \ \ \ \ =\ 52,}
\DoxyCodeLine{00046\ \ \ \ \ SDIO\_CMD53\_IO\_RW\_EXTENDED\ \ \ \ \ =\ 53,}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ SDIO\_ACMD6\_SET\_BUS\_WIDTH\ \ \ \ \ \ =\ 6}
\DoxyCodeLine{00049\ \}\ \mbox{\hyperlink{sdio_8h_ae06ac01a113854a942fc6698c933f4d5}{sdio\_cmd\_t}};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00055\ \ \ \ \ SD\_CMDTYPE\_BC\ \ \ =\ 1,\ \ \textcolor{comment}{//\ Broadcast}}
\DoxyCodeLine{00056\ \ \ \ \ SD\_CMDTYPE\_BCR\ \ =\ 2,\ \ \textcolor{comment}{//\ Broadcast\ with\ response}}
\DoxyCodeLine{00057\ \ \ \ \ SD\_CMDTYPE\_AC\ \ \ =\ 3,\ \ \textcolor{comment}{//\ Addressed,\ no\ data}}
\DoxyCodeLine{00058\ \ \ \ \ SD\_CMDTYPE\_ADTC\ =\ 4\ \ \ \textcolor{comment}{//\ Addressed,\ data\ transfer}}
\DoxyCodeLine{00059\ \}\ \mbox{\hyperlink{sdio_8h_a8a582d5a643a8cd9e47fccd92b20e998}{sdio\_cmdtype\_t}};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00064\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00065\ \ \ \ \ SD\_RESP\_NONE\ =\ 0,\ \ \textcolor{comment}{//\ No\ response}}
\DoxyCodeLine{00066\ \ \ \ \ SD\_RESP\_R1,\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Normal\ command\ response}}
\DoxyCodeLine{00067\ \ \ \ \ SD\_RESP\_R1b,\ \ \ \ \ \ \ \textcolor{comment}{//\ With\ busy\ signal}}
\DoxyCodeLine{00068\ \ \ \ \ SD\_RESP\_R2,\ \ \ \ \ \ \ \ \textcolor{comment}{//\ CID/CSD\ response}}
\DoxyCodeLine{00069\ \ \ \ \ SD\_RESP\_R3,\ \ \ \ \ \ \ \ \textcolor{comment}{//\ OCR\ response}}
\DoxyCodeLine{00070\ \ \ \ \ SD\_RESP\_R4,\ \ \ \ \ \ \ \ \textcolor{comment}{//\ IO\_SEND\_OP\_COND\ response}}
\DoxyCodeLine{00071\ \ \ \ \ SD\_RESP\_R5,\ \ \ \ \ \ \ \ \textcolor{comment}{//\ IO\_RW\_DIRECT\ response}}
\DoxyCodeLine{00072\ \ \ \ \ SD\_RESP\_R6,\ \ \ \ \ \ \ \ \textcolor{comment}{//\ Published\ RCA\ response}}
\DoxyCodeLine{00073\ \ \ \ \ SD\_RESP\_R7\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Interface\ condition}}
\DoxyCodeLine{00074\ \}\ \mbox{\hyperlink{sdio_8h_aa68d9761b8047a0186f73082d26f187d}{sdio\_resptype\_t}};}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \textcolor{preprocessor}{\#define\ SDIO\_DEVICE\_STATUS\_CARD\_INSERTED\ \ \ \ \ \ \ \ (1<<0)}}
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\#define\ SDIO\_DEVICE\_STATUS\_NOT\_INSERTED\ \ \ \ \ \ \ \ \ (1<<1)}}
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\#define\ SDIO\_DEVICE\_STATUS\_WRITE\_PROTECT\_SWITCH\ (1<<2)}}
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\#define\ SDIO\_DEVICE\_STATUS\_SD\_INITIALIZED\ \ \ \ \ \ \ (1<<16)}}
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\#define\ SDIO\_DEVICE\_STATUS\_IS\_SDHC\ \ \ \ \ \ \ \ \ \ \ \ \ \ (1<<20)}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00091\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{sdio_8h_ab11a099348fcbbdace5b9b2420d0aa6e}{sdio\_initialize}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ device);}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00098\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{sdio_8h_a3e63f71992d785b689af734b53bca246}{sdio\_close}}();}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00106\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{sdio_8h_a07a2de59fcb0ab95500131549d6af1a7}{sdio\_get\_device\_status}}(uint32\_t\ *state);}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00114\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{sdio_8h_a6c5f3ac2d6fc36ae2480fcc13a2de63b}{sdio\_reset\_device}}(uint32\_t*\ response);}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00122\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{sdio_8h_ab5fadbbea5df9a3e07141eeb7f5018a4}{sdio\_set\_clock}}(uint32\_t\ divider);}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00132\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{sdio_8h_a6cd91990353c05aebbdd1f98fc4a3459}{sdio\_read\_oc\_register}}(uint32\_t*\ oc);}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00143\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{sdio_8h_ae0c4828f466b6977465cc244ea988494}{sdio\_read\_hc\_register}}(uint32\_t\ offset,\ uint32\_t*\ value);}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00155\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{sdio_8h_ab09d7d1f8a9ccf225331e03b8851b684}{sdio\_set\_hc\_register}}(uint32\_t\ offset,\ uint32\_t\ value);}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00171\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{sdio_8h_a4aaac3d9e2b1666ea9d2bbaa53f4696f}{sdio\_send\_cmd}}(\mbox{\hyperlink{sdio_8h_ae06ac01a113854a942fc6698c933f4d5}{sdio\_cmd\_t}}\ cmd,\ \mbox{\hyperlink{sdio_8h_a8a582d5a643a8cd9e47fccd92b20e998}{sdio\_cmdtype\_t}}\ type,\ \mbox{\hyperlink{sdio_8h_aa68d9761b8047a0186f73082d26f187d}{sdio\_resptype\_t}}\ resptype,\ uint32\_t\ arg,\ \textcolor{keywordtype}{void}*\ data,\ uint32\_t\ block\_count,\ uint32\_t\ sector\_size,\ \textcolor{keywordtype}{void}*\ response,\ \textcolor{keywordtype}{size\_t}\ response\_length);}

\end{DoxyCode}
