\doxysection{powerblocks/core/system/ipc.c File Reference}
\hypertarget{ipc_8c}{}\label{ipc_8c}\index{powerblocks/core/system/ipc.c@{powerblocks/core/system/ipc.c}}


Inter Processor Communications.  


{\ttfamily \#include "{}ipc.\+h"{}}\newline
{\ttfamily \#include "{}system/system.\+h"{}}\newline
{\ttfamily \#include "{}system/exceptions.\+h"{}}\newline
{\ttfamily \#include "{}Free\+RTOS.\+h"{}}\newline
{\ttfamily \#include "{}semphr.\+h"{}}\newline
{\ttfamily \#include "{}utils/log.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{ipc_8c_a5810d17291d17426d26e8449f88a3fda}\label{ipc_8c_a5810d17291d17426d26e8449f88a3fda} 
\#define {\bfseries IPC\+\_\+\+PPCMSG}~(\texorpdfstring{$\ast$}{*}(volatile uint32\+\_\+t\texorpdfstring{$\ast$}{*})0xcd800000)
\item 
\Hypertarget{ipc_8c_a511e23d82693dd0fa03d5846a80b8bcc}\label{ipc_8c_a511e23d82693dd0fa03d5846a80b8bcc} 
\#define {\bfseries IPC\+\_\+\+PPCCTRL}~(\texorpdfstring{$\ast$}{*}(volatile uint32\+\_\+t\texorpdfstring{$\ast$}{*})0xcd800004)
\item 
\Hypertarget{ipc_8c_ae761c5ff51314e18eb6b8bdd1d50efa7}\label{ipc_8c_ae761c5ff51314e18eb6b8bdd1d50efa7} 
\#define {\bfseries IPC\+\_\+\+ARMMSG}~(\texorpdfstring{$\ast$}{*}(volatile uint32\+\_\+t\texorpdfstring{$\ast$}{*})0xcd800008)
\item 
\Hypertarget{ipc_8c_a4a0ac284986c13a682056b1158d6c4c6}\label{ipc_8c_a4a0ac284986c13a682056b1158d6c4c6} 
\#define {\bfseries IPC\+\_\+\+ARMCTRL}~(\texorpdfstring{$\ast$}{*}(volatile uint32\+\_\+t\texorpdfstring{$\ast$}{*})0xcd80000c)
\item 
\Hypertarget{ipc_8c_ad13441ffc211b4e4a22acae33b6c74d6}\label{ipc_8c_ad13441ffc211b4e4a22acae33b6c74d6} 
\#define {\bfseries IPC\+\_\+\+MAX\+\_\+\+REQUEST\+\_\+\+COUNT}~32
\item 
\Hypertarget{ipc_8c_ae7ae4a8a196a512972e55e39d042b54b}\label{ipc_8c_ae7ae4a8a196a512972e55e39d042b54b} 
\#define {\bfseries IPC\+\_\+\+PPCCTRL\+\_\+\+X1}~(1$<$$<$0)
\item 
\Hypertarget{ipc_8c_a5144e149ccf6ea8d45a865ab534ff8f3}\label{ipc_8c_a5144e149ccf6ea8d45a865ab534ff8f3} 
\#define {\bfseries IPC\+\_\+\+PPCCTRL\+\_\+\+Y2}~(1$<$$<$1)
\item 
\Hypertarget{ipc_8c_a87e55b16bf5b53c40cbd92ae000c27ac}\label{ipc_8c_a87e55b16bf5b53c40cbd92ae000c27ac} 
\#define {\bfseries IPC\+\_\+\+PPCCTRL\+\_\+\+Y1}~(1$<$$<$2)
\item 
\Hypertarget{ipc_8c_aa3aa0a8cfa4de46e9b51d1e7741becad}\label{ipc_8c_aa3aa0a8cfa4de46e9b51d1e7741becad} 
\#define {\bfseries IPC\+\_\+\+PPCCTRL\+\_\+\+X2}~(1$<$$<$3)
\item 
\Hypertarget{ipc_8c_a296538bf302b23e349b58d949191aa17}\label{ipc_8c_a296538bf302b23e349b58d949191aa17} 
\#define {\bfseries IPC\+\_\+\+PPCCTRL\+\_\+\+IY1}~(1$<$$<$4)
\item 
\Hypertarget{ipc_8c_af4a6684b7f191798e6e7897a526fd44f}\label{ipc_8c_af4a6684b7f191798e6e7897a526fd44f} 
\#define {\bfseries IPC\+\_\+\+PPCCTRL\+\_\+\+IY2}~(1$<$$<$5)
\item 
\Hypertarget{ipc_8c_aa85d880c902d5883ba00a13dd738885e}\label{ipc_8c_aa85d880c902d5883ba00a13dd738885e} 
\#define {\bfseries IPC\+\_\+\+MESSAGE\+\_\+\+MAGIC}~0x64e0eaed
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{ipc_8c_a1990848fdee907712ae616cbee77300e}{ipc\+\_\+initialize}} ()
\begin{DoxyCompactList}\small\item\em Initializes the IPC Interface. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{ipc_8c_ae8e083bfe7208c3a646e69b9af93474e}{ipc\+\_\+request}} (\mbox{\hyperlink{structipc__message}{ipc\+\_\+message}} \texorpdfstring{$\ast$}{*}message, ipc\+\_\+async\+\_\+handler\+\_\+t handler, void \texorpdfstring{$\ast$}{*}params)
\begin{DoxyCompactList}\small\item\em Puts a request in and gets the response. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Inter Processor Communications. 

IPC interface between Broadway and Starlet. Designed to implement IOS\textquotesingle{}s protocol.

\begin{DoxyAuthor}{Author}
Samuel Fitzsimons (rainbain) 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2025 @license MIT (see LICENSE file) 
\end{DoxyDate}


\doxysubsection{Function Documentation}
\Hypertarget{ipc_8c_a1990848fdee907712ae616cbee77300e}\index{ipc.c@{ipc.c}!ipc\_initialize@{ipc\_initialize}}
\index{ipc\_initialize@{ipc\_initialize}!ipc.c@{ipc.c}}
\doxysubsubsection{\texorpdfstring{ipc\_initialize()}{ipc\_initialize()}}
{\footnotesize\ttfamily \label{ipc_8c_a1990848fdee907712ae616cbee77300e} 
void ipc\+\_\+initialize (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Initializes the IPC Interface. 

Usually called through ios\+\_\+initialize

Initializes the IPC interface. Setups the Free\+RTOS Mutexes and data structures for communications. \Hypertarget{ipc_8c_ae8e083bfe7208c3a646e69b9af93474e}\index{ipc.c@{ipc.c}!ipc\_request@{ipc\_request}}
\index{ipc\_request@{ipc\_request}!ipc.c@{ipc.c}}
\doxysubsubsection{\texorpdfstring{ipc\_request()}{ipc\_request()}}
{\footnotesize\ttfamily \label{ipc_8c_ae8e083bfe7208c3a646e69b9af93474e} 
int ipc\+\_\+request (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structipc__message}{ipc\+\_\+message}} \texorpdfstring{$\ast$}{*}}]{message}{, }\item[{ipc\+\_\+async\+\_\+handler\+\_\+t}]{handler}{, }\item[{void \texorpdfstring{$\ast$}{*}}]{params}{}\end{DoxyParamCaption})}



Puts a request in and gets the response. 

Puts a request into the IPC interface. Then after its completion, the handler will be called from the interrupt service.


\begin{DoxyParams}{Parameters}
{\em message} & Data structure to the message to send to Starlet. \\
\hline
{\em handler} & Handler called from interrupt service upon compilation. \\
\hline
{\em params} & Pointer passed to the handler. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Result as int, negative if error. 
\end{DoxyReturn}
